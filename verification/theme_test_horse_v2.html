<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Horse Year Theme Background Test V2 (FIXED)</title>
    <style>
        body {
            background: radial-gradient(circle at 50% 30%, #a71e32, #7a0c1e) !important;
            margin: 0;
            height: 100vh;
            color: #f2d378;
            font-family: sans-serif;
            overflow: hidden;
        }
        .label {
            position: absolute;
            background: rgba(0,0,0,0.5);
            padding: 5px;
            font-size: 14px;
            z-index: 100;
        }
        
        .bg-left, .bg-right {
            position: fixed;
            width: 400px;
            height: 400px;
            border: 1px dashed white;
            background-repeat: no-repeat;
            background-size: contain;
            z-index: 1;
        }
        
        .bg-left { left: 5vw; bottom: 5vh; }
        .bg-right { right: 5vw; top: 5vh; }
    </style>
</head>
<body>
    <div class="label" style="top: 0; left: 0;">V2 Test: Fixed Quoting & New Candidates</div>
    
    <div class="label" style="top: 410px; left: 5vw;">1. Galloping (Current)</div>
    <div class="bg-left" id="test-left"></div>

    <div class="label" style="top: 410px; right: 5vw;">2. Head (Current)</div>
    <div class="bg-right" id="test-right"></div>

    <div class="label" style="top: 350px; left: 40vw;">3. Calligraphy 'Ma' (New)</div>
    <div class="bg-center" id="test-center"></div>

    <style>
        .bg-center {
            position: fixed;
            left: 40vw;
            top: 20vh;
            width: 400px;
            height: 400px;
            border: 1px dashed yellow;
            background-repeat: no-repeat;
            background-size: contain;
            z-index: 10;
        }
    </style>

    <script>
        // ... (Previous Paths) ...
        var horseGallopPath = "M65.4,22.6c0,0-1.2-4.4,2.2-7c3.4-2.6,3.6-5.2,1.2-6.6c-2.4-1.4-6.8,0.8-6.8,0.8s-3.4,4.2-7.8,1.4c-4.4-2.8-5.6-3-5.6-3s-1.8-1.2-3.4,2.2c-1.6,3.4,2.4,5.4,2.4,5.4s-1.4,1.8-6.4,0.6c-5-1.2-7.8-3.4-7.8-3.4s-1.6,5-0.6,9.2c1,4.2,4.8,6.8,4.8,6.8s-5.6,8.6-6,14c-0.4,5.4,0.6,6.4,2.8,7.2c2.2,0.8,3.6-1.8,3.6-1.8s-1.6,4-1,6.8c0.6,2.8,2,3.4,4.2,2.2c2.2-1.2,1.4-3.6,1.4-3.6s1,4.6,4.4,5c3.4,0.4,4.4-1.6,4.4-1.6s0.8,3,3.6,2.8c2.8-0.2,3-3.2,3-3.2s2.8,0.2,4.8-2.6c2-2.8,0.8-4.8,0.8-4.8s3.4-1,3.4-4.8c0-3.8-3-6.2-3-6.2s3.2-1.8,4-4.2C70,29.2,65.4,22.6,65.4,22.6z";
        
        var bgLeft = "data:image/svg+xml;charset=UTF-8,%3csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='" + horseGallopPath + "' fill='%23f2d378' opacity='1' transform='scale(1.2) translate(-10, 0)'/%3e%3c/svg%3e";
        document.getElementById('test-left').style.backgroundImage = "url('" + bgLeft.replace(/'/g, '%22') + "')";


        var horseHeadPath = "M48,272.47l40.63,18.06a32,32,0,0,0,24.88.47l12.78-5.12a32,32,0,0,0,18.76-20.5l9.22-30.65a24,24,0,0,1,12.55-15.65L208,208v50.33a48,48,0,0,1-26.53,42.94l-57.22,28.65A80,80,0,0,0,64,401.48V416h319.86V224c0-106-85.92-192-191.92-192H48a12,12,0,0,0-12,12a16.9,16.9,0,0,0,1.79,7.58";
        var bgRight = "data:image/svg+xml;charset=UTF-8,%3csvg viewBox='0 0 448 512' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='" + horseHeadPath + "' fill='%23f2d378' opacity='1'/%3e%3c/svg%3e";
        document.getElementById('test-right').style.backgroundImage = "url('" + bgRight.replace(/'/g, '%22') + "')";


        // 3. Calligraphy Character Candidate
        // We use encodeURIComponent to ensure chinese char is safe
        var charMa = "é¦¬";
        var bgCenterFull = "data:image/svg+xml;charset=UTF-8,%3csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3e%3ccircle cx='50' cy='50' r='45' stroke='%23f2d378' stroke-width='2' fill='none'/%3e%3ctext x='50' y='75' font-family='KaiTi, STKaiti, serif' font-size='60' text-anchor='middle' fill='%23f2d378' font-weight='bold'%3e" + charMa + "%3c/text%3e%3c/svg%3e";

        // Applying the quoting fix as well, just in case
        var bgCenterFixed = bgCenterFull.replace(/'/g, '%22');

        // Note: For Chinese characters in Data URI, explicit URL encoding is safer
        bgCenterFixed = bgCenterFixed.replace(charMa, encodeURIComponent(charMa));
        
        document.getElementById('test-center').style.backgroundImage = "url('" + bgCenterFixed + "')";
    </script>
</body>
</html>
